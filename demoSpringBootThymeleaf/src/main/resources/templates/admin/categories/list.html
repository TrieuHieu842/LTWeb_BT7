<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{admin/layout.html}">
<head>
<meta charset="UTF-8">
<title>Category Management</title>
<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<!-- Bootstrap Icons -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
	rel="stylesheet">

<style>
.page-container {
	max-width: 1000px;
	margin: 30px auto;
}

.card {
	border-radius: 0.75rem;
	overflow: hidden;
}

.card-header {
	background: linear-gradient(90deg, #0d6efd, #0dcaf0);
	color: #fff;
	padding: 1rem;
}

.card-header h5 {
	font-weight: 600;
}

.search-box input {
	border-radius: 20px 0 0 20px;
	border-right: none;
}

.search-box button {
	border-radius: 0 20px 20px 0;
}

.table th {
	font-size: 0.85rem;
	letter-spacing: .5px;
	text-transform: uppercase;
	background: #f8f9fa;
}

.table-hover tbody tr:hover {
	background-color: #f1f5fb;
}

.action-btns .btn {
	border-radius: 50%;
	width: 32px;
	height: 32px;
	padding: 0;
}

.pagination .page-link {
	border-radius: 50% !important;
	width: 38px;
	height: 38px;
	text-align: center;
	line-height: 36px;
}
</style>
</head>
<body>
	<section class="page-container" layout:fragment="content">

		<!-- Navbar -->
		<nav
			class="navbar navbar-expand-lg navbar-light bg-light shadow-sm rounded mb-4">
			<div class="container-fluid">
				<a class="navbar-brand fw-bold" href="#"><i class="bi bi-box"></i>
					Category</a>
				<div class="collapse navbar-collapse">
					<ul class="navbar-nav">
						<li class="nav-item"><a class="nav-link"
							th:href="@{/admin/categories/list}"><i class="bi bi-list-ul"></i>
								Danh sách</a></li>
						<li class="nav-item"><a class="nav-link"
							th:href="@{/admin/categories/add}"><i
								class="bi bi-plus-circle"></i> Thêm mới</a></li>
					</ul>
				</div>
			</div>
		</nav>

		<!-- Card -->
		<div class="card shadow border-0">
			<div
				class="card-header d-flex justify-content-between align-items-center">
				<h5 class="mb-0">
					<i class="bi bi-tags-fill me-2"></i> Category List
				</h5>
				<div class="d-flex">
					<!-- Search box -->
					<a th:href="@{/admin/categories/searchpaginated}"
						class="btn btn-light btn-sm me-2"> <i class="bi bi-search"></i>
						Search
					</a>
					</form>
					<a th:href="@{/admin/categories/add}"
						class="btn btn-success btn-sm"> <i class="bi bi-plus-lg"></i>
						Add
					</a>
				</div>
			</div>

			<div class="card-body p-0">

				<!-- Thông báo -->
				<div th:if="${message != null}"
					class="alert alert-success alert-dismissible fade show m-3"
					role="alert">
					<i class="bi bi-check-circle me-2"></i> [[${message}]]
					<button type="button" class="btn-close" data-bs-dismiss="alert"
						aria-label="Close"></button>
				</div>

				<!-- Bảng -->
				<div class="table-responsive">
					<table class="table table-hover align-middle text-center mb-0">
						<thead>
							<tr>
								<th>#</th>
								<th>Category Name</th>
								<th>Actions</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="category : ${categories}">
								<td class="fw-bold">[[${category.categoryId}]]</td>
								<td class="text-start">[[${category.name}]]</td>
								<td class="action-btns"><a
									th:href="@{'/admin/categories/edit/' + ${category.categoryId}}"
									class="btn btn-outline-primary btn-sm" title="Edit"> <i
										class="bi bi-pencil"></i>
								</a> <a
									th:href="@{'/admin/categories/delete/' + ${category.categoryId}}"
									class="btn btn-outline-danger btn-sm" title="Delete"
									onclick="return confirm('Are you sure to delete this category?');">
										<i class="bi bi-trash"></i>
								</a></td>
							</tr>
							<tr th:if="${#lists.isEmpty(categories)}">
								<td colspan="3" class="text-muted fst-italic">No categories
									found.</td>
							</tr>
						</tbody>
					</table>
				</div>

				<!-- Pagination -->
				<nav th:if="${totalPages > 1}" aria-label="Page navigation">
					<ul class="pagination justify-content-center my-3">
						<li class="page-item"
							th:classappend="${currentPage == 1} ? 'disabled'"><a
							class="page-link" th:href="@{/admin/categories/page/1}"> <i
								class="bi bi-chevron-double-left"></i>
						</a></li>
						<li class="page-item"
							th:classappend="${currentPage == 1} ? 'disabled'"><a
							class="page-link"
							th:href="@{'/admin/categories/page/' + ${currentPage - 1}}">
								<i class="bi bi-chevron-left"></i>
						</a></li>
						<li class="page-item"
							th:each="pageNum : ${#numbers.sequence(1, totalPages)}"
							th:classappend="${pageNum == currentPage} ? 'active'"><a
							class="page-link"
							th:href="@{'/admin/categories/page/' + ${pageNum}}">
								[[${pageNum}]] </a></li>
						<li class="page-item"
							th:classappend="${currentPage == totalPages} ? 'disabled'">
							<a class="page-link"
							th:href="@{'/admin/categories/page/' + ${currentPage + 1}}}">
								<i class="bi bi-chevron-right"></i>
						</a>
						</li>
						<li class="page-item"
							th:classappend="${currentPage == totalPages} ? 'disabled'">
							<a class="page-link"
							th:href="@{'/admin/categories/page/' + ${totalPages}}}"> <i
								class="bi bi-chevron-double-right"></i>
						</a>
						</li>
					</ul>
				</nav>

			</div>
		</div>
	</section>

	<!-- Bootstrap JS -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
